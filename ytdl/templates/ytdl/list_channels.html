{% extends "base.html" %}

{% block head %}
<link href="/static/css/pop.css" media="all" rel="stylesheet" type="text/css"/>
<script language="javascript" src="/static/js/jquery.pop.js" type="text/javascript"></script>
<script language="javascript" src="/static/js/jquery.timeago.js" type="text/javascript"></script>
<script language="javascript" src="/static/js/bootstrap.js" type="text/javascript"></script>
{% endblock %}

{% block content %}

{% include "ytdl/navbar.html" %}



<div style="width:600px;">

{% for chan in channels %}
<div style="float: left; padding: 5px">
  <!-- Main view-channel link -->
  <a href="{% url 'ytdl.views.view_channel' chan.id %}"
     data-toggle="tooltip" data-placement="bottom" title="{{ chan.chanid }}">
    <img width="44px" src="{% url 'ytdl.views.channel_icon' chan.id %}" class="img-thumbnail" title="hi">
  </a>
  <br>
  <!-- Refresh channel link -->
  <a href="{% url 'ytdl.views.refresh_channel' chan.id %}" class="async"
     data-toggle="tooltip" data-title="Refresh">
    <span class="badge">{{ chan.num_unviewed_recently }}</span>
  </a>
</div>
{% endfor %}
<div class="clearfix">
</div>

<a href="{% url 'ytdl.views.refresh_all' %}" class="async">Refresh all <i class="icon-refresh"></i></a>

<script type="text/javascript">
  $("a").tooltip();
</script>


<h2>Recent videos</h2>
<table class="table table-striped table-hover table-condensed" id="videos">
{% for v in recent %}
<tr>
  <td><a href="{% url 'ytdl.views.view_channel' v.channel.id %}">{{ v.title }}</a></td>
</tr>
{% endfor %}
</table>

<h2>Downloads</h2>
<table class="table table-striped table-hover table-condensed" id="videos">
{% for v in downloads %}
<tr class="{{ v.status_class }}">
  <td><a href="{% url 'ytdl.views.view_channel' v.channel.id %}?status={{v.status}}">{{ v.title }}</a></td>
</tr>
{% endfor %}
</table>

<script type="text/javascript">
  $(function(){
  
    <!-- Download links -->
    $("a.async").each(function(i, ahref){
      $(ahref).click(function(evt){
        $.ajax(ahref.href);
        return false;
      });
    });

    <!-- Time ago -->
    $("abbr.timeago").timeago();

  });
</script>

{% endblock %}
